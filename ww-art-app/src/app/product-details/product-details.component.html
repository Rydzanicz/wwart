<div class="product-details-container" *ngIf="product">

  <div class="product-details-layout">

    <div class="product-preview-section">
      <app-product-preview
        [product]="product"
        [availableShapes]="availableShapes"
        (selectedShapeChange)="onShapeSelected($event)">
      </app-product-preview>
    </div>

    <div class="product-info-section">

      <div class="product-header">
        <div class="breadcrumb">
          <a routerLink="/shop">Sklep</a> / <span>{{ product.name }}</span>
        </div>
        <h1 class="product-title">{{ product.name }}</h1>

        <div class="product-rating" *ngIf="product.rating">
          <div class="rating-stars">
        <span class="material-icons"
              *ngFor="let star of getRatingStars(product.rating)"
              [class.filled]="star.filled">
          {{ star.filled ? 'star' : 'star_border' }}
        </span>
          </div>
          <span class="rating-count" *ngIf="product.ratingCount">
        ({{ product.ratingCount }} opinii)
      </span>
        </div>
      </div>

      <div class="pricing-section">
        <div class="price-current">{{ formatCurrency(product.price) }} PLN</div>
        <div class="price-original" *ngIf="product.originalPrice">
          {{ formatCurrency(product.originalPrice) }} PLN
        </div>
        <div class="savings" *ngIf="calculateSavings() > 0">
          Oszczƒôdzasz {{ formatCurrency(calculateSavings()) }} PLN!
        </div>
      </div>

      <div class="product-description">
        <h3>Opis produktu</h3>
        <p>{{ product.description }}</p>
        <p class="details" *ngIf="product.descriptionDetails">{{ product.descriptionDetails }}</p>
      </div>

      <div class="product-options">

        <div class="option-group">
          <label>Rozmiar:</label>
          <div class="size-options">
            <button
              *ngFor="let size of availableSizes"
              [class.selected]="selectedSize === size"
              (click)="selectedSize = size"
              class="size-btn">
              {{ size }}
            </button>
          </div>
        </div>

        <div class="option-group">
          <label>Kolor:</label>
          <div class="color-options">
            <button
              *ngFor="let color of availableColors"
              [class.selected]="selectedColor === color"
              (click)="selectedColor = color"
              class="color-btn">
              {{ color }}
            </button>
          </div>
        </div>

        <div class="option-group">
          <label>Ilo≈õƒá:</label>
          <div class="quantity-controls">
            <button (click)="decreaseQuantity()" [disabled]="quantity <= 1" class="qty-btn">-</button>
            <span class="quantity-display">{{ quantity }}</span>
            <button (click)="increaseQuantity()" class="qty-btn">+</button>
          </div>
        </div>

      </div>

      <div class="action-buttons">
        <button (click)="addToCart()" class="btn-add-to-cart">
          <span class="icon">üõí</span>
          Dodaj do koszyka - {{ formatCurrency(product.price * quantity) }} PLN
        </button>
        <button (click)="goToCart()" class="btn-go-to-cart">
          Przejd≈∫ do koszyka
        </button>
      </div>

      <div class="product-specs">
        <h3>Specyfikacja techniczna</h3>
        <div class="specs-grid">
          <div class="spec-item">
            <span class="spec-label">Waga:</span>
            <span class="spec-value">{{ product.weight }}</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">Wymiary:</span>
            <span class="spec-value">{{ product.dimensions }}</span>
          </div>
          <div class="spec-item">
            <span class="spec-label">Grawerowanie:</span>
            <span class="spec-value">Tak, obie strony</span>
          </div>
        </div>
      </div>

      <div class="product-benefits">
        <h3>Dlaczego warto wybraƒá ten produkt?</h3>
        <ul>
          <li>‚ú® Prawdziwe diamenty najwy≈ºszej jako≈õci</li>
          <li>üî® Rƒôczne wykonanie przez mistrz√≥w jubiler√≥w</li>
          <li>üíé Personalizacja poprzez grawerowanie</li>
          <li>üõ°Ô∏è Trwa≈Ço≈õƒá na ca≈Çe ≈ºycie</li>
          <li>üì¶ Eleganckie opakowanie prezentowe</li>
          <li>üöö Darmowa dostawa przy zam√≥wieniach powy≈ºej 200 PLN</li>
        </ul>
      </div>
    </div>
  </div>
</div>
